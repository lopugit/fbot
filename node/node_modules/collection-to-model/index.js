var mongoose = require('mongoose')
dbconf = require('secrets')
dbconf = dbconf.mongodb
Schema = mongoose.Schema


let oldPostModel = function(collectionString, database){
    if(database) dbconf.db = database
    let uri = "mongodb://" + dbconf.username + ":" + dbconf.password + "@" + dbconf.server + ":" + dbconf.port + "/" + dbconf.db + "?authSource=admin"
    let options = { useMongoClient: true }
    let node = mongoose.createConnection(uri, options)
    /**
     * @param collectionString is a string representing the collection to hook into
     * and generate a model/schema for
     */
    let schema = new Schema()
    let model = mongoose.model(collectionString, schema)
    return model

}

module.exports = oldPostModel